;/*!/assets/js/artDialog/dialog-min.js*/
define("detail:assets/js/artDialog/dialog-min",function(t){var e=t("common:lib/jquery/jquery-1.11.3");!function(){function t(e){var i=s[e],o="exports";return"object"==typeof i?i:(i[o]||(i[o]={},i[o]=i.call(i[o],t,i[o],i)||i[o]),i[o])}function i(t,e){s[t]=e}var s={};i("jquery",function(){return e}),i("popup",function(t){function e(){this.destroyed=!1,this.__popup=i("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=i("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],s++}var i=t("jquery"),s=0,o=!("minWidth"in i("html")[0].style),n=!o;return i.extend(e.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed)return this;var s=this.__popup,a=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=t||this.follow,!this.__ready){if(s.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),o||i(window).on("resize",i.proxy(this.reset,this)),this.modal){var r={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||e.zIndex};s.addClass(this.className+"-modal"),n||i.extend(r,{position:"absolute",width:i(window).width()+"px",height:i(document).height()+"px"}),a.css(r).attr({tabindex:"0"}).on("focus",i.proxy(this.focus,this)),this.__mask=a.clone(!0).attr("style","").insertAfter(s),a.addClass(this.className+"-backdrop").insertBefore(s),this.__ready=!0}s.html()||s.html(this.innerHTML)}return s.addClass(this.className+"-show").show(),a.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return!this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),e.current===this&&(e.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),o||i(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var t in this)delete this[t];return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var t=this.node,s=this.__popup,o=e.current,n=this.zIndex=e.zIndex++;if(o&&o!==this&&o.blur(!1),!i.contains(t,this.__getActive())){var a=s.find("[autofocus]")[0];!this._autofocus&&a?this._autofocus=!0:a=t,this.__focus(a)}return s.css("zIndex",n),e.current=this,s.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var i=this.__getEventListener(t),s=0;s<i.length;s++)e===i[s]&&i.splice(s--,1);return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var i=0;i<e.length;i++)e[i].call(this)},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,i=e&&e.activeElement||t;return i}catch(s){}},__center:function(){var t=this.__popup,e=i(window),s=i(document),o=this.fixed,n=o?0:s.scrollLeft(),a=o?0:s.scrollTop(),r=e.width(),c=e.height(),l=t.width(),d=t.height(),h=(r-l)/2+n,u=382*(c-d)/1e3+a,p=t[0].style;p.left=Math.max(parseInt(h),n)+"px",p.top=Math.max(parseInt(u),a)+"px"},__follow:function(t){var e=t.parentNode&&i(t),s=this.__popup;if(this.__followSkin&&s.removeClass(this.__followSkin),e){var o=e.offset();if(o.left*o.top<0)return this.__center()}var n=this,a=this.fixed,r=i(window),c=i(document),l=r.width(),d=r.height(),h=c.scrollLeft(),u=c.scrollTop(),p=s.width(),f=s.height(),_=e?e.outerWidth():0,v=e?e.outerHeight():0,g=this.__offset(t),b=g.left,m=g.top,y=a?b-h:b,w=a?m-u:m,k=a?0:h,x=a?0:u,E=k+l-p,L=x+d-f,$={},C=this.align.split(" "),I=this.className+"-",N={top:"bottom",bottom:"top",left:"right",right:"left"},z={top:"top",bottom:"top",left:"left",right:"left"},T=[{top:w-f,bottom:w+v,left:y-p,right:y+_},{top:w,bottom:w-f+v,left:y,right:y-p+_}],j={left:y+_/2-p/2,top:w+v/2-f/2},q={left:[k,E],top:[x,L]};i.each(C,function(t,e){T[t][e]>q[z[e]][1]&&(e=C[t]=N[e]),T[t][e]<q[z[e]][0]&&(C[t]=N[e])}),C[1]||(z[C[1]]="left"===z[C[0]]?"top":"left",T[1][C[1]]=j[z[C[1]]]),I+=C.join("-")+" "+this.className+"-follow",n.__followSkin=I,e&&s.addClass(I),$[z[C[0]]]=parseInt(T[0][C[0]]),$[z[C[1]]]=parseInt(T[1][C[1]]),s.css($)},__offset:function(t){var e=t.parentNode,s=e?i(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var o=t.ownerDocument,n=o.defaultView||o.parentWindow;if(n==window)return s;var a=n.frameElement,r=i(o),c=r.scrollLeft(),l=r.scrollTop(),d=i(a).offset(),h=d.left,u=d.top;return{left:s.left+h-c,top:s.top+u-l}}}),e.zIndex=1024,e.current=null,e}),i("dialog-config",{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}),i("dialog",function(t){var e=t("jquery"),i=t("popup"),s=t("dialog-config"),o=s.cssUri;if(o){var n=t[t.toUrl?"toUrl":"resolve"];n&&(o=n(o),o='<link rel="stylesheet" href="'+o+'" />',e("base")[0]?e("base").before(o):e("head").append(o))}var a=0,r=new Date-0,c=!("minWidth"in e("html")[0].style),l="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),d=!c&&!l,h=function(t,i,s){var o=t=t||{};("string"==typeof t||1===t.nodeType)&&(t={content:t,fixed:!l}),t=e.extend(!0,{},h.defaults,t),t.original=o;var n=t.id=t.id||r+a,c=h.get(n);return c?c.focus():(d||(t.fixed=!1),t.quickClose&&(t.modal=!0,t.backdropOpacity=0),e.isArray(t.button)||(t.button=[]),void 0!==s&&(t.cancel=s),t.cancel&&t.button.push({id:"cancel",value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay}),void 0!==i&&(t.ok=i),t.ok&&t.button.push({id:"ok",value:t.okValue,callback:t.ok,autofocus:!0}),h.list[n]=new h.create(t))},u=function(){};u.prototype=i.prototype;var p=h.prototype=new u;return h.create=function(t){var s=this;e.extend(this,new i);var o=(t.original,e(this.node).html(t.innerHTML)),n=e(this.backdrop);return this.options=t,this._popup=o,e.each(t,function(t,e){"function"==typeof s[t]?s[t](e):s[t]=e}),t.zIndex&&(i.zIndex=t.zIndex),o.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").attr("title",this.cancelValue).on("click",function(t){s._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&n.on("onmousedown"in document?"mousedown":"click",function(){return s._trigger("cancel"),!1}),this.addEventListener("show",function(){n.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var e=t.target,o=e.nodeName,n=/^input|textarea$/i,a=i.current===s,r=t.keyCode;!a||n.test(o)&&"button"!==e.type||27===r&&s._trigger("cancel")},e(document).on("keydown",this._esc),this.addEventListener("remove",function(){e(document).off("keydown",this._esc),delete h.list[this.id]}),a++,h.oncreate(this),this},h.create.prototype=p,e.extend(p,{content:function(t){var i=this._$("content");return"object"==typeof t?(t=e(t),i.empty("").append(t.show()),this.addEventListener("beforeremove",function(){e("body").append(t.hide())})):i.html(t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var i=this,s="",o=0;return this.callbacks={},"string"==typeof t?(s=t,o++):e.each(t,function(t,n){var a=n.id=n.id||n.value,r="";i.callbacks[a]=n.callback,n.display===!1?r=' style="display:none"':o++,s+='<button type="button" i-id="'+a+'"'+r+(n.disabled?" disabled":"")+(n.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+n.value+"</button>",i._$("button").on("click","[i-id="+a+"]",function(t){var s=e(this);s.attr("disabled")||i._trigger(a),t.preventDefault()})}),this._$("button").html(s),this._$("footer")[o?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),h.oncreate=e.noop,h.getCurrent=function(){return i.current},h.get=function(t){return void 0===t?h.list:h.list[t]},h.list={},h.defaults=s,h}),window.dialog=t("dialog")}()});
;/*!/assets/js/backbone.js*/
define("detail:assets/js/backbone",function(t,e){!function(i){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["common:lib/underscore/underscore-min","common:lib/jquery/jquery-1.11.3","exports"],function(t,e,s){n.Backbone=i(n,s,t,e)});else if("undefined"!=typeof e){var s,r=t("common:lib/underscore/underscore-min");try{s=t("common:lib/jquery/jquery-1.11.3")}catch(a){}i(n,e,r,s)}else n.Backbone=i(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(function(t,e,i,n){var s=t.Backbone,r=Array.prototype.slice;e.VERSION="1.2.3",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],h(t,this),s)};case 4:return function(t,s,r){return i[e](this[n],h(t,this),s,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},o=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=a(e,s,n))})},h=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?u(t):i.isString(t)?function(e){return e.get(t)}:t},u=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},l=/\s+/,d=function(t,e,n,s,r){var a,o=0;if(n&&"object"==typeof n){void 0!==s&&"context"in r&&void 0===r.context&&(r.context=s);for(a=i.keys(n);o<a.length;o++)e=d(t,e,a[o],n[a[o]],r)}else if(n&&l.test(n))for(a=n.split(l);o<a.length;o++)e=t(e,a[o],s,r);else e=t(e,n,s,r);return e};c.on=function(t,e,i){return f(this,t,e,i)};var f=function(t,e,i,n,s){if(t._events=d(g,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var r=t._listeners||(t._listeners={});r[s.id]=s}return t};c.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),a=r[s];if(!a){var o=this._listenId||(this._listenId=i.uniqueId("l"));a=r[s]={obj:t,objId:s,id:o,listeningTo:r,count:0}}return f(t,e,n,this,a),this};var g=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),r=n.context,a=n.ctx,o=n.listening;o&&o.count++,s.push({callback:i,context:r,ctx:r||a,listening:o})}return t};c.off=function(t,e,i){return this._events?(this._events=d(v,this._events,t,e,{context:i,listeners:this._listeners}),this):this},c.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var r=t?[t._listenId]:i.keys(s),a=0;a<r.length;a++){var o=s[r[a]];if(!o)break;o.obj.off(e,n,this)}return i.isEmpty(s)&&(this._listeningTo=void 0),this};var v=function(t,e,n,s){if(t){var r,a=0,o=s.context,h=s.listeners;if(e||n||o){for(var u=e?[e]:i.keys(t);a<u.length;a++){e=u[a];var c=t[e];if(!c)break;for(var l=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||o&&o!==f.context?l.push(f):(r=f.listening,r&&0===--r.count&&(delete h[r.id],delete r.listeningTo[r.objId]))}l.length?t[e]=l:delete t[e]}return i.size(t)?t:void 0}for(var g=i.keys(h);a<g.length;a++)r=h[g[a]],delete h[r.id],delete r.listeningTo[r.objId]}};c.once=function(t,e,n){var s=d(p,{},t,e,i.bind(this.off,this));return this.on(s,void 0,n)},c.listenToOnce=function(t,e,n){var s=d(p,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var p=function(t,e,n,s){if(n){var r=t[e]=i.once(function(){s(e,r),n.apply(this,arguments)});r._callback=n}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return d(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var s=t[e],r=t.all;s&&r&&(r=r.slice()),s&&_(s,n),r&&_(r,[e].concat(n))}return t},_=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};c.bind=c.on,c.unbind=c.off,i.extend(e,c);var y=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(y.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var r=n.unset,a=n.silent,o=[],h=this._changing;this._changing=!0,h||(this._previousAttributes=i.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,l=this._previousAttributes;for(var d in s)e=s[d],i.isEqual(u[d],e)||o.push(d),i.isEqual(l[d],e)?delete c[d]:c[d]=e,r?delete u[d]:u[d]=e;if(this.id=this.get(this.idAttribute),!a){o.length&&(this._pending=n);for(var f=0;f<o.length;f++)this.trigger("change:"+o[f],this,u[o[f]],n)}if(h)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var r=t[s];i.isEqual(e[s],r)||(n[s]=r)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return e.set(s,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},z(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var r=n.wait;if(s&&!r){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var a=this,o=n.success,h=this.attributes;n.success=function(t){a.attributes=h;var e=n.parse?a.parse(t,n):t;return r&&(e=i.extend({},s,e)),e&&!a.set(e,n)?!1:(o&&o.call(n.context,a,t,n),void a.trigger("sync",a,t,n))},z(this,n),s&&r&&(this.attributes=i.extend({},h,s));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=s);var c=this.sync(u,this,n);return this.attributes=h,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&r(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(z(this,t),a=this.sync("delete",this,t)),s||r(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};o(y,b,"attributes");var x=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},w={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1},k=function(t,e,i){i=Math.min(Math.max(i,0),t.length);for(var n=Array(t.length-i),s=e.length,r=0;r<n.length;r++)n[r]=t[r+i];for(r=0;s>r;r++)t[r+i]=e[r];for(r=0;r<n.length;r++)t[r+s+i]=n[r]};i.extend(x.prototype,c,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,E))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:i.clone(t);var s=this._removeModels(t,e);return!e.silent&&s&&this.trigger("update",this,e),n?s[0]:s},set:function(t,e){if(null!=t){e=i.defaults({},e,w),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?[t]:t.slice();var s=e.at;null!=s&&(s=+s),0>s&&(s+=this.length+1);for(var r,a=[],o=[],h=[],u={},c=e.add,l=e.merge,d=e.remove,f=!1,g=this.comparator&&null==s&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,p=0;p<t.length;p++){r=t[p];var m=this.get(r);if(m){if(l&&r!==m){var _=this._isModel(r)?r.attributes:r;e.parse&&(_=m.parse(_,e)),m.set(_,e),g&&!f&&(f=m.hasChanged(v))}u[m.cid]||(u[m.cid]=!0,a.push(m)),t[p]=m}else c&&(r=t[p]=this._prepareModel(r,e),r&&(o.push(r),this._addReference(r,e),u[r.cid]=!0,a.push(r)))}if(d){for(p=0;p<this.length;p++)r=this.models[p],u[r.cid]||h.push(r);h.length&&this._removeModels(h,e)}var y=!1,b=!g&&c&&d;if(a.length&&b?(y=this.length!=a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,k(this.models,a,0),this.length=this.models.length):o.length&&(g&&(f=!0),k(this.models,o,null==s?this.length:s),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(p=0;p<o.length;p++)null!=s&&(e.index=s+p),r=o[p],r.trigger("add",r,this,e);(f||y)&&this.trigger("sort",this,e),(o.length||h.length)&&this.trigger("update",this,e)}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},z(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,i){n&&s.add(t,i),r&&r.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var r=this.indexOf(s);this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i.length?i:!1},_isModel:function(t){return t instanceof y},_addReference:function(t){this._byId[t.cid]=t;var e=this.modelId(t.attributes);null!=e&&(this._byId[e]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t){delete this._byId[t.cid];var e=this.modelId(t.attributes);null!=e&&delete this._byId[e],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);s!==r&&(null!=s&&delete this._byId[s],null!=r&&(this._byId[r]=e))}this.trigger.apply(this,arguments)}}});var S={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};o(x,S,"models");var I=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,P)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];i.extend(I.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(T);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var r=H[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||F()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var h=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,h&&h.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,u,s),u};var H={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,C=/\*\w+/g,R=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,c,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a,n)!==!1&&(r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a))}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(R,"\\$&").replace(A,"(?:$1)?").replace(j,function(t,e){return e?t:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,U=/#.*$/;M.started=!1,i.extend(M.prototype,c,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(N,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!M.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(U,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new M;var q=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};y.extend=x.extend=$.extend=I.extend=M.extend=q;var F=function(){throw new Error('A "url" property or function must be specified')},z=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})});
;/*!/assets/js/coupon.js*/
define("detail:assets/js/coupon",function(n){var t=n("common:lib/jquery/jquery-1.11.3"),o=n("common:lib/underscore/underscore-min"),e='<% for(var i = 0, length = listData.length; i < length; i++) { %>\r\n    <dd class="discount-coupon-item <% if (listData[i].couponType === 2) { %>multiple<% } %>">\r\n        <div class="mod-btn">\r\n            <a class="vm-btn" data-key="<%= listData[i].couponKey %>">立即领取</a>\r\n        </div>\r\n       	<div class="mod-bd">\r\n            <p class="mod-bd-view">\r\n                <span class="vm-amount"><sup>¥</sup><%= listData[i].reductionQuota %></span>\r\n                <em>\r\n                <% if (listData[i].couponType === 1) { %>\r\n                (单品券)\r\n                <% } else { %>\r\n                (多品券)\r\n                <% } %>\r\n                </em>\r\n            </p>\r\n            <h3 class="ellipsis"><%= listData[i].couponName %>优惠券</h3>\r\n            <h5>满<%= listData[i].consumptionQuota %>元使用</h5>\r\n        </div>\r\n        <div class="mod-info">\r\n            <p><%= listData[i].start %>－<%= listData[i].end %></p>\r\n            <p class="vm-range ellipsis">适用范围：<%= listData[i].appliableDesc %></p>\r\n            <% if (listData[i].couponType === 2) { %>\r\n            <a class="vm-more" target="_blank" href="http://lists.meizu.com/page/couponItems/<%= listData[i].couponGroupId %>.html">查看适用></a>\r\n            <% } %>\r\n        </div>\r\n    </dd>\r\n<% } %>',a={promoInner:t("#J_promoInner"),discountCouponList:t("#J_discountCoupon")},i={remoteURL:{getCouponList:"http://promotion.meizu.com/coupon/item/list/",getCoupon:"http://promotion.meizu.com/coupon/acquire/"},init:function(n){var t=this;t.getCoupon(n),t.bindEvent()},bindEvent:function(){var n=this;t("#J_promoInner,#J_promoMore").on("click",function(){t("#layerPromo").fadeIn(100)}),t("#J_discountCoupon").on("click",".vm-btn",function(o){var e=t(o.currentTarget),a=e.data("key");e.hasClass("disabled")||(n.ajax(n.remoteURL.getCoupon+a,null,"get","jsonp").done(function(){n.artAlert("您已领取成功，已领取的优惠券可在会员中心我的优惠券进行查看！")}).fail(function(t){n.artAlert(401===t.code?"请先登录!":t.message)}),o.preventDefault(),o.stopPropagation(),e.addClass("disabled"),window.setTimeout(function(){e.removeClass("disabled")},1e3))}),t("#J_promoClose").on("click",function(){t("#layerPromo").fadeOut(200)})},getCoupon:function(n){var t=this,o=t.remoteURL.getCouponList+n;t.ajax(o,{scope:3},"get","jsonp").done(function(n){n&&n.length&&(n=t.formatData(n),t.renderCoupon(n))})},formatData:function(n){var o=function(n){var t=new Date(n),o=t.getFullYear(),e=t.getMonth()+1,a=t.getDate(),i=t.getHours()<10?"0"+t.getHours():t.getHours(),s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return o+"."+e+"."+a+" "+i+":"+s};return t.each(n,function(n,t){t.start=o(t.start),t.end=o(t.end)}),n},renderCoupon:function(n){var i="";n&&(t.each(n,function(n,t){return i+=1===t.couponType?'<span class="vm-tag"><em>满'+t.consumptionQuota+"减"+t.reductionQuota+"</em></span>":'<span class="vm-tag multiple"><em>满'+t.consumptionQuota+"减"+t.reductionQuota+"</em></span>",2===n?!1:void 0}),couponItemCompiled=o.template(e),couponListLayer=couponItemCompiled({listData:n}),a.promoInner.append(i).parent().parent().slideDown(200),a.discountCouponList.append(couponListLayer))},ajax:function(n,o,e,a){var i=t.Deferred();return t.ajax({url:n,type:e?e:"get",data:o?o:null,dataType:a?a:"json",timeout:4e3,cache:!1}).done(function(n){n.success?i.resolve(n.data):i.reject(n)}).fail(function(){i.reject("网络异常，请稍后再试!")}),i.promise()},artAlert:function(n){var o=this,e='<div class="bi-alert" id="couponAlert"><div class="bi-alert-bd">'+n+"</div></div>";o.instance&&o.instance.remove(),o.instance=t(e).appendTo("#layerPromo").addClass("bi-show"),setTimeout(function(){o.instance.remove()},2e3)}};i.init(MZ.modelData.itemId),window.winTodoList=i});
;/*!/assets/js/detail-common.js*/
define("detail:assets/js/detail-common",function(e,t,o){var n,r,i,a=e("common:lib/jquery/jquery-1.11.3");r=function(e,t,o,n){var r=Math.ceil((t-e)/1e3),i=setInterval(function(){0>=r?(n&&n(),clearInterval(i)):o&&o(r),r--},1e3)},n=function(e){var t,o={store:"http://store.meizu.com/member/login.htm?",mall:"http://mall.meizu.com/member/login.html?"},n="https://login.flyme.cn/vCodeLogin?";o[e]&&(t={useruri:o[e]+"useruri="+location.href,service:"store",sid:"unionlogin",autodirct:!0},location.href=n+a.param(t))},i=function(e,t,o,n){var r=a.Deferred();return a.ajax({url:e,data:t?t:null,type:o?o:"get",dataType:n?n:"jsonp",timeout:4e3,cache:!1}).done(function(e){e.success?r.resolve(e.data):r.reject(e)}).fail(function(){r.reject("网络异常，请稍后再试!")}),r.promise()},o.exports={ajax:i,login:n,countDown:r}});
;/*!/assets/js/favorite.js*/
define("detail:assets/js/favorite",function(t,e,a){function i(){r.init()}var o=t("common:lib/jquery/jquery-1.11.3"),n=t("detail:assets/js/detail-common");t("detail:assets/js/artDialog/dialog-min");var r=({promoInner:o("#J_promoInner"),discountCouponList:o("#J_discountCouponList")},{remoteURL:{addFavorite:"http://me.meizu.com/vip/favorite"},init:function(){var t=this;t.showTips(),t.bindEvent()},showTips:function(){MZ.modelData.itemId+"favorite";localStorage&&"false"!==localStorage.getItem("global_favorite")&&o("#J_favoriteTips").show()},bindEvent:function(){var t=this;o("#J_favorite").on("click",function(e){var a=(o(e.currentTarget),MZ.modelData.itemId);n.ajax(t.remoteURL.addFavorite,{itemId:a}).done(function(e){1===e?t.artAlert("收藏成功",!0):t.artAlert("您已收藏过该商品")}).fail(function(e){t.artAlert(401===e.code?"请先登录":e.message)}),e.preventDefault(),e.stopPropagation()}),o("#J_favoriteTipsClose").on("click",function(t){{var e=o(t.currentTarget);MZ.modelData.itemId+"favorite"}e.parent().fadeOut(100),localStorage&&localStorage.setItem("global_favorite","false")})},artAlert:function(t,e){var a,i=e?'<i class="icon icon-success"></i>':'<i class="icon icon-warning"></i>',n='<div class="bi-dialog" id="artAlert"><div class="bi-alert-bd tcenter"><div class="alert-message">'+i+'<p class="alert-message-bd"><span>'+t+'</span><a target="_blank" href="http://me.meizu.com/member/favorite/index">查看我的收藏</a></p></div></div><a class="bi-close" id="J_DialogClose" href="javascript:;">╳</a></div>';a=dialog({width:360,height:180,content:n,onshow:function(){var t=this;o(t.node).on("click",".bi-close",function(){t.close().remove()})},backdropOpacity:.4}).showModal()}});window._Favorite=r,a.exports=i});
;/*!/assets/js/jquery.gotop/jquery.gotop.js*/
define("detail:assets/js/jquery.gotop/jquery.gotop",function(t,e,o){!function(i){"function"==typeof define&&define.amd?define(["common:lib/jquery/jquery-1.11.3"],i):"object"==typeof e?o.exports=i(t("common:lib/jquery/jquery-1.11.3")):i(jQuery)}(function(t){t.extend(t.easing,{easeOutCubic:function(t,e,o,i,n){return i*((e=e/n-1)*e*e+1)+o}});var e={speed:0,smartShow:!0,smartHeight:200,scrollTo:0,container:null},o=function(o){this.opts=t.extend({},e,o),this.init()};return o.prototype={init:function(){var e=this,o=e.opts;e.$container=t(o.container?container:document),e.$conBody=e.render(),e.opts.smartShow&&e.autoShow(),e.bindEvent()},bindEvent:function(){var t=this;t.$conBody.on("click",".gotop-arrow",function(){t.goTop()})},goTop:function(){var e=this,o=e.opts,i=o.speed,n=o.scrollTo;t.isNumeric(i)?t("html,body").animate({scrollTop:n},i,"easeOutCubic"):"string"==typeof n&&e.$container.scrollTop(t(o.scrollTo).offset().top)},autoShow:function(){var e,o=this,i=o.$container,n=o.$conBody,r=i.width(),s=this.opts.smartHeight;1240>r&&t("siteGotop").css({left:"initial",right:10,marginLeft:0}),i.scrollTop()>s&&n.fadeIn(300),i.on("scroll",function(){o.timer&&(clearTimeout(o.timer),e=null),o.timer=setTimeout(function(){i.scrollTop()>s?n.fadeIn():n.fadeOut("fast")},100)})},render:function(){var e=this,o='<div class="site-gotop" id="siteGotop"><a class="gotop-suggest" title="建议反馈" href="http://me.meizu.com/member/advice/index" target="_blank"></a><div class="gotop-arrow" title="回到顶部"></div></div>',i=".site-gotop{position:fixed;width:44px;bottom:50px;left:50%;margin-left:640px;display:none}.gotop-suggest,.gotop-arrow{display:inline-block;width:44px;height:44px;background:#b4b4b4 no-repeat 50%50%;cursor:pointer}.gotop-suggest{background-image:url(http://store.res.meizu.com/resources/php/store/static/detail/assets/img/suggest.png)}.gotop-arrow{background-image:url(http://store.res.meizu.com/resources/php/store/static/detail/assets/img/gotop-arrow.png);margin-top:5px}";return e.createStyle(i),t(o).appendTo("body")},createStyle:function(t){var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)},destroy:function(){this.$container.off("scroll.scrollfix")}},o})});
;/*!/assets/js/jquery.lazyload/jquery.lazyload.js*/
define("detail:assets/js/jquery.lazyload/jquery.lazyload",function(A){var g=A("common:lib/jquery/jquery-1.11.3");!function(A,g,I,C){var B=A(g);A.fn.lazyload=function(Q){function E(){var g=0;e.each(function(){var I=A(this);if(!t.skip_invisible||I.is(":visible"))if(A.abovethetop(this,t)||A.leftofbegin(this,t));else if(A.belowthefold(this,t)||A.rightoffold(this,t)){if(++g>t.failure_limit)return!1}else I.trigger("appear"),g=0})}var w,e=this,t={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:g,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder:"data:image/jpeg;base64,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AAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADRQAAAAYAAAAAAAAAAAAAAAEAAAABAAAACABpAG4AaQB0AC0AMQB4ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAABAAAAAFJnaHRsb25nAAAAAQAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAAQAAAABSZ2h0bG9uZwAAAAEAAAADdXJsVEVYVAAAAAEAAAAAAABudWxsVEVYVAAAAAEAAAAAAABNc2dlVEVYVAAAAAEAAAAAAAZhbHRUYWdURVhUAAAAAQAAAAAADmNlbGxUZXh0SXNIVE1MYm9vbAEAAAAIY2VsbFRleHRURVhUAAAAAQAAAAAACWhvcnpBbGlnbmVudW0AAAAPRVNsaWNlSG9yekFsaWduAAAAB2RlZmF1bHQAAAAJdmVydEFsaWduZW51bQAAAA9FU2xpY2VWZXJ0QWxpZ24AAAAHZGVmYXVsdAAAAAtiZ0NvbG9yVHlwZWVudW0AAAARRVNsaWNlQkdDb2xvclR5cGUAAAAATm9uZQAAAAl0b3BPdXRzZXRsb25nAAAAAAAAAApsZWZ0T3V0c2V0bG9uZwAAAAAAAAAMYm90dG9tT3V0c2V0bG9uZwAAAAAAAAALcmlnaHRPdXRzZXRsb25nAAAAAAA4QklNBCgAAAAAAAwAAAACP/AAAAAAAAA4QklNBBQAAAAAAAQAAAABOEJJTQQMAAAAAAIzAAAAAQAAAAEAAAABAAAABAAAAAQAAAIXABgAAf/Y/+0ADEFkb2JlX0NNAAH/7gAOQWRvYmUAZIAAAAAB/9sAhAAMCAgICQgMCQkMEQsKCxEVDwwMDxUYExMVExMYEQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQ0LCw0ODRAODhAUDg4OFBQODg4OFBEMDAwMDBERDAwMDAwMEQwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/90ABAAB/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwABAgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEAAhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEAAgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTxJQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwD1JJfLCSKH/9kAOEJJTQQhAAAAAABdAAAAAQEAAAAPAEEAZABvAGIAZQAgAFAAaABvAHQAbwBzAGgAbwBwAAAAFwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAgAEMAQwAgADIAMAAxADUAAAABADhCSU0EBgAAAAAABwAEAAAAAQEA/+EPfWh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE1LTExLTI3VDE0OjUxOjM4KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE1LTExLTI3VDE1OjAyOjU5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxNS0xMS0yN1QxNTowMjo1OSswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MTFjYTI3LWE2YmItNGJlNi1iYzg4LTQyOGMxNWFhZWZmNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowNjExY2EyNy1hNmJiLTRiZTYtYmM4OC00MjhjMTVhYWVmZjYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmYWJjNWFlZi02MjI1LTQzYWMtYTQzOC1iYzUyNWJiY2QzYjMiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJEaXNwbGF5Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmYWJjNWFlZi02MjI1LTQzYWMtYTQzOC1iYzUyNWJiY2QzYjMiIHN0RXZ0OndoZW49IjIwMTUtMTEtMjdUMTQ6NTE6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MTFjYTI3LWE2YmItNGJlNi1iYzg4LTQyOGMxNWFhZWZmNiIgc3RFdnQ6d2hlbj0iMjAxNS0xMS0yN1QxNTowMjo1OSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmZhYmM1YWVmLTYyMjUtNDNhYy1hNDM4LWJjNTI1YmJjZDNiMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpmYWJjNWFlZi02MjI1LTQzYWMtYTQzOC1iYzUyNWJiY2QzYjMiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmYWJjNWFlZi02MjI1LTQzYWMtYTQzOC1iYzUyNWJiY2QzYjMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iD0RJQ0NfUFJPRklMRQABAQAADzRhcHBsAhAAAG1udHJSR0IgWFlaIAffAAsAEgAKADoAAmFjc3BBUFBMAAAAAEFQUEwAAAAAAAAAAAAAAAAAAAAAAAD21gABAAAAANMtYXBwbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWRlc2MAAAFQAAAAYmRzY20AAAG0AAAEGmNwcnQAAAXQAAAAI3d0cHQAAAX0AAAAFHJYWVoAAAYIAAAAFGdYWVoAAAYcAAAAFGJYWVoAAAYwAAAAFHJUUkMAAAZEAAAIDGFhcmcAAA5QAAAAIHZjZ3QAAA5wAAAAMG5kaW4AAA6gAAAAPmNoYWQAAA7gAAAALG1tb2QAAA8MAAAAKGJUUkMAAAZEAAAIDGdUUkMAAAZEAAAIDGFhYmcAAA5QAAAAIGFhZ2cAAA5QAAAAIGRlc2MAAAAAAAAACERpc3BsYXkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtbHVj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"};return Q&&(C!==Q.failurelimit&&(Q.failure_limit=Q.failurelimit,delete Q.failurelimit),C!==Q.effectspeed&&(Q.effect_speed=Q.effectspeed,delete Q.effectspeed),A.extend(t,Q)),w=t.container===C||t.container===g?B:A(t.container),0===t.event.indexOf("scroll")&&w.bind(t.event,function(){return E()}),this.each(function(){var g=this,I=A(g);g.loaded=!1,(I.attr("src")===C||I.attr("src")===!1)&&I.is("img")&&I.attr("src",t.placeholder),I.one("appear",function(){if(!this.loaded){if(t.appear){var C=e.length;t.appear.call(g,C,t)}A("<img />").bind("load",function(){var C=I.attr("data-"+t.data_attribute);I.hide(),I.is("img")?I.attr("src",C):I.css("background-image","url('"+C+"')"),I[t.effect](t.effect_speed),g.loaded=!0;var B=A.grep(e,function(A){return!A.loaded});if(e=A(B),t.load){var Q=e.length;t.load.call(g,Q,t)}}).attr("src",I.attr("data-"+t.data_attribute))}}),0!==t.event.indexOf("scroll")&&I.bind(t.event,function(){g.loaded||I.trigger("appear")})}),B.bind("resize",function(){E()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&B.bind("pageshow",function(g){g.originalEvent&&g.originalEvent.persisted&&e.each(function(){A(this).trigger("appear")})}),A(I).ready(function(){E()}),this},A.belowthefold=function(I,Q){var E;return E=Q.container===C||Q.container===g?(g.innerHeight?g.innerHeight:B.height())+B.scrollTop():A(Q.container).offset().top+A(Q.container).height(),E<=A(I).offset().top-Q.threshold},A.rightoffold=function(I,Q){var E;return E=Q.container===C||Q.container===g?B.width()+B.scrollLeft():A(Q.container).offset().left+A(Q.container).width(),E<=A(I).offset().left-Q.threshold},A.abovethetop=function(I,Q){var E;return E=Q.container===C||Q.container===g?B.scrollTop():A(Q.container).offset().top,E>=A(I).offset().top+Q.threshold+A(I).height()},A.leftofbegin=function(I,Q){var E;return E=Q.container===C||Q.container===g?B.scrollLeft():A(Q.container).offset().left,E>=A(I).offset().left+Q.threshold+A(I).width()},A.inviewport=function(g,I){return!(A.rightoffold(g,I)||A.leftofbegin(g,I)||A.belowthefold(g,I)||A.abovethetop(g,I))},A.extend(A.expr[":"],{"below-the-fold":function(g){return A.belowthefold(g,{threshold:0})},"above-the-top":function(g){return!A.belowthefold(g,{threshold:0})},"right-of-screen":function(g){return A.rightoffold(g,{threshold:0})},"left-of-screen":function(g){return!A.rightoffold(g,{threshold:0})},"in-viewport":function(g){return A.inviewport(g,{threshold:0})},"above-the-fold":function(g){return!A.belowthefold(g,{threshold:0})},"right-of-fold":function(g){return A.rightoffold(g,{threshold:0})},"left-of-fold":function(g){return!A.rightoffold(g,{threshold:0})}})}(g,window,document)});
;/*!/assets/js/jquery.scrollfix/jquery.scrollfix.js*/
define("detail:assets/js/jquery.scrollfix/jquery.scrollfix",function(n,o,t){!function(e){"function"==typeof define&&define.amd?define(["common:lib/jquery/jquery-1.11.3"],e):"object"==typeof o?t.exports=e(n("common:lib/jquery/jquery-1.11.3")):e(jQuery)}(function(n){var o={min:0,max:0,buffer:0,container:window,fixClass:"fixed",onEnter:null,onLeave:null};return ScrollFix=function(t,e){this.$elem=n(t),this.opts=n.extend({},o,e),this.init()},ScrollFix.prototype={constructor:ScrollFix,init:function(){var o=this,t=o.opts;"string"==typeof t.max&&(t.max=n(t.max)),"string"==typeof t.min&&(t.min=n(t.min)),o.bindEvent()},bindEvent:function(){var o,t=this,e=t.opts,i=t.$elem,s=n(e.container),l=e.max,r=e.min,f=!1,c=0,a=0;s.on("scroll.scrollfix",function(){o=s.scrollTop()+e.buffer,l.length&&(c=l.offset().top),r.length&&(a=r.offset().top),0===a&&(a=i.offset().top),0===c&&(c=n(document).height()),o>=a&&c>=o?f||(f=!0,i.addClass(e.fixClass),n.isFunction(e.onEnter)&&e.onEnter(i[0],o)):f&&(f=!1,i.removeClass(e.fixClass),n.isFunction(e.onLeave)&&e.onLeave(i[0],o))})},destroy:function(){this.$elem.removeData("scrollfix"),this.opts.container.off("scroll.scrollfix")}},n.fn.scrollfix=function(o){return this.each(function(){var t=n(this),e=(t.data("scrollfix"),"object"==typeof o&&o);new ScrollFix(this,e)})},ScrollFix})});
;/*!/assets/js/jquery.vtab/jquery.vtab.js*/
define("detail:assets/js/jquery.vtab/jquery.vtab",function(t,e,n){!function(i){"function"==typeof define&&define.amd?define(["common:lib/jquery/jquery-1.11.3"],i):"object"==typeof e?n.exports=i(t("common:lib/jquery/jquery-1.11.3")):i(jQuery)}(function(t){function e(e,i){this.$con=t(e),this.opts=t.extend({},n,i),this.init()}var n={eventype:"click",effect:"none",active:null,afterActive:t.noop,navSelector:".ui-tab-nav",contSelector:".ui-tab-content",delay:0};e.prototype={init:function(){var t=this,e=t.opts;t.setup(),t.bindEvent(),null!==e.active&&t.activate(e.active)},setup:function(){var t=this,e=t.$con;t.$tabs=e.find(t.opts.navSelector).children(),t.$panels=e.find(t.opts.contSelector).children()},bindEvent:function(){var e,n=this;n.$tabs.on(n.opts.eventype,function(i,a){var o=t(this),s=o.index();o.hasClass("current")||(e&&clearTimeout(e),e=setTimeout(function(){n.activate(s,a)},n.opts.delay),i.preventDefault())}),n.opts.delay&&n.$tabs.on("mouseleave",function(){clearTimeout(e)})},activate:function(t,e){var n=this,i=n.opts,a={none:function(){n.$panels.hide().eq(t).show()},fade:function(){n.$panels.hide().eq(t).fadeIn()}};a[n.opts.effect](),n.$tabs.eq(t).addClass("current").siblings().removeClass("current"),n.$panels.eq(t).addClass("current").siblings().removeClass("current"),i.afterActive(n.$tabs.eq(t),t,e)}},t.fn.vtab=function(n){return this.each(function(){var i=t(this),a=i.data("vtab");a||i.data("vtab",a=new e(this,n)),"string"==typeof n&&a[n]()})}})});
;/*!/assets/js/JSON-js/json2.js*/
define("detail:assets/js/JSON-js/json2",function(require,exports,module){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var r,n,o,u,f,a=gap,i=e[t];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(t)),"function"==typeof rep&&(i=rep.call(e,t,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,f=[],"[object Array]"===Object.prototype.toString.apply(i)){for(u=i.length,r=0;u>r;r+=1)f[r]=str(r,i)||"null";return o=0===f.length?"[]":gap?"[\n"+gap+f.join(",\n"+gap)+"\n"+a+"]":"["+f.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(u=rep.length,r=0;u>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,i),o&&f.push(quote(n)+(gap?": ":":")+o));else for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o=str(n,i),o&&f.push(quote(n)+(gap?": ":":")+o));return o=0===f.length?"{}":gap?"{\n"+gap+f.join(",\n"+gap)+"\n"+a+"}":"{"+f.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var r,n,o=t[e];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(t,e,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()});
;/*!/assets/js/property.js*/
define("detail:assets/js/property",function(e){Array.prototype.every||(Array.prototype.every=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments.length>=2?arguments[1]:void 0,n=0;a>n;n++)if(n in t&&!e.call(i,t[n],n,t))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],n=arguments.length>=2?arguments[1]:void 0,s=0;a>s;s++)if(s in t){var o=t[s];e.call(n,o,s,t)&&i.push(o)}return i}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),a=this,i=function(){},n=function(){return a.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),n.prototype=new i,n});var t=e("common:lib/jquery/jquery-1.11.3"),a=e("common:lib/underscore/underscore-min"),i=e("common:widgets/site-basejs/login"),n=e("detail:assets/js/detail-common"),s=e("detail:assets/js/backbone");e("detail:assets/js/artDialog/dialog-min");var o=MZ.modelData,r='<%for(var i=0, length=packages.length; i<length; i++){%>\r\n    <a data-value="<%= packages[i].id %>" <%if(!packages[i].available){%>class="disabled"<%}%> href="#" title="<%= packages[i].name %>">\r\n        <p class="vm-text <% if (length === 1 && packages[i].id === 0) { %>vm-standard<% } %>">\r\n            <%=packages[i].name%>\r\n            <%if(packages[i].items && packages[i].items.length){%>\r\n                <%if(packages[i].available){%>\r\n                    <span class="vm-text-price">\r\n                        <%=packages[i].price%>元\r\n                    </span>\r\n                    <%if(packages[i].profits>0){%>\r\n                        <span class="vm-text-profits">省<em><%=packages[i].profits%></em>元</span>\r\n                    <%}%>\r\n                <% }else{ %>\r\n                    已售罄\r\n                <% } %>\r\n            <%}else if(length!==1){%>\r\n                <span class="vm-text-standard">无优惠</span>\r\n            <%}%>\r\n        </p>\r\n    </a>\r\n<%}%>',c='<ul class="clearfix">\r\n    <% for(var i = 0, length = items.length; i < length; i++) { %>\r\n    <li>\r\n        <p class="vm-pic">\r\n            <img src="<%= items[i].cells[items[i].recommend].images + \'@80x80.jpg\' %>" width="80" height="80" alt="<%= items[i].cells[items[i].recommend].names %>">\r\n        </p>\r\n        <p class="vm-tit">\r\n            <%= items[i].name %>\r\n        </p>\r\n        <p class="vm-price">\r\n            ¥ <%= items[i].cells[items[i].recommend].price.toFixed(2) %>\r\n        </p>\r\n        <div class="vm-prop">\r\n            <% for (var p in items[i].saleAttrs) { %>\r\n                <p>\r\n                <% for (var jj = 0, length2 = items[i].saleAttrs[p].length; jj < length2; jj++) { %>\r\n                    <% if (!items[i].saleAttrs[p][jj].imageColor || length2 === 1) { %>\r\n                        <a class="vm-prop-text <% if (items[i].recommend === p + \':\' + items[i].saleAttrs[p][jj].id) { %>selected<% } %>" href="javascript:;" data-sku="<%= items[i].cells[p + \':\' + items[i].saleAttrs[p][jj].id].skuId %>" data-sid="<%= items[i].id %>" data-key="<%= p + \':\' + items[i].saleAttrs[p][jj].id %>" title="<%= items[i].saleAttrs[p][jj].name %>">\r\n                            <span><%= items[i].saleAttrs[p][jj].name %></span>\r\n                        </a>\r\n                    <% } else { %>\r\n                        <a class="vm-prop-img <% if (items[i].recommend === p + \':\' + items[i].saleAttrs[p][jj].id) { %>selected<% } %>" href="javascript:;" data-sku="<%= items[i].cells[p + \':\' + items[i].saleAttrs[p][jj].id].skuId %>" data-sid="<%= items[i].id %>" data-key="<%= p + \':\' + items[i].saleAttrs[p][jj].id %>" title="<%= items[i].saleAttrs[p][jj].name %>">\r\n                            <img class="vm-prop-sale" src="<%= items[i].saleAttrs[p][jj].imageColor %>" width="20" height="20" >\r\n                       </a>\r\n                    <% } %>\r\n                <% } %>\r\n                </p>\r\n            <% } %>\r\n        </div>\r\n    </li>\r\n    <% } %>\r\n</ul>';t.fn.extend({lockButton:function(e){var a=t(this),e=e?e:3e3;a.addClass("locked").prop("disabled",!0),window.setTimeout(function(){a.removeClass("locked").prop("disabled",!1)},e)}});var l,d,u,p,g,m;m={price:t("#J_price"),totalPriceShortcut:t("#J_totalPriceShortcut"),btnBuy:t("#J_btnBuy"),packageTab:t("#J_packageTab"),packageContent:t("#J_packageContent"),packageBody:t("#J_packageBody"),summaryMain:t("#J_summaryMain"),imgBooth:t("#J_imgBooth"),previewThumb:t("#J_previewThumb"),propertyPackage:t("#propertyPackage"),quantity:t("#J_quantity"),sumaryPackageItemNames:t("#J_sumaryPackageItemNames"),message:t("#J_message"),serverTime:t("#servertime"),panicBuyingWrap:t("#J_panicBuyingWrap"),summaryName:t("#J_summaryName"),activity:t("#J_activity"),discountTag:t("#J_discountTag"),originalPrice:t("#J_originalPrice"),discountCountDown:t("#J_discountCountDown")},u=s.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:0,stock:0}}),p=s.Collection.extend({model:u}),l=s.Model.extend({defaults:{buyButton:"",images:null,names:"",packageIds:null,price:"",priceCent:0,pvs:"",skuId:"",stock:"",attributes:"",propItem:null,propSet:null,total:0,quantity:1,activePackage:"",packageSet:null,packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0,packageMap:null,packageStock:null,packageItems:null,initSelectedPackage:!1,skuIdChangeTarget:"",costPriceCent:0,isPanicBuying:!1,panicToken:""}}),d=s.View.extend({events:{"click .property-set-sale a":"setProp","click #J_packageTab a":"setPackage","click .vm-minus":"quantityMinus","click .vm-plus":"quantityPlus","keyup #J_quantity":"enterQuantity","click .vm-prop a":"activePackageItem","click #J_btnBuy":"distributeSubmit","click #J_panicBuyingLogin":"triggerLogin"},packageTabCompiled:a.template(r),packageItemCompiled:a.template(c),imgLoaded:[],initialize:function(){var e=this,t=e.model;e.listenTo(e.model,"change:pvs",e.updatePvs),e.listenTo(e.model,"change:propSet",e.mergeSkuModel),e.listenTo(e.model,"change:activePackage",e.activePackage),e.listenTo(e.model,"change:packageIds",e.handlerPackage),e.listenTo(e.model,"change:names",e.updateNames),e.listenTo(e.model,"change:images",e.updateImages),e.listenTo(e.model,"change:stock",e.updateStock),e.listenTo(e.model,"change:buyButton",e.updateButton),e.listenTo(e.model,"change:packageName",e.updateSummaryInfo),e.listenTo(e.model,"change:attributes",e.updateSummaryInfo),e.listenTo(e.model,"change:mainPriceCent",e.updatePrice),e.listenTo(e.model,"change:packageTotalPriceCent",e.setTotalPrice),e.listenTo(e.model,"change:total",e.updateTotal),e.listenTo(e.model,"change:quantity",e.updateQuantity),e.listenTo(e.model,"change:skuId",e.handlerPriceOrDiscount),e.listenTo(e.model,"change:costPriceCent",e.updateCostPrice),t.get("isPanicBuying")&&(e.listenTo(e.model,"change:skuId",e.panicBuyingStockStatus.bind(e,"skuId")),e.listenTo(e.model,"change:packageSkuIds",e.panicBuyingStockStatus.bind(e,"packageSkuIds"))),e.initSku()},initSku:function(){var e=this,a=e.model,i=(e.collection,a.get("pvs")),n=i.split("+")[0],s=i.split("+")[1],o=n.split(";"),r=[],c=[],l={};t.each(o,function(t,a){c=a.split(":"),l[c[0]]=a,r.push(c[0]),e.$el.find('[data-value="'+a+'"]').addClass("selected")}),a.set({propItem:r,propSet:l}),void 0!==s&&(a.set("pvs",n,{silent:!0}),e.initPackage(s)),e.analysis(),e.syncSoonSale(),e.initPageContent()},initPageContent:function(){var e=this,t=Number(m.serverTime.val()),a=MZ.modelData.discount&&MZ.modelData.discount.endTime;MZ.modelData.discount&&a>t&&e.countDown(m.serverTime.val(),MZ.modelData.discount.endTime,g.getDiscountTime,e.closeDiscountCountDown),m.quantity.val(1),e.syncQuantityStatus(1)},initPackage:function(e){var t=this;t.model.set({initSelectedPackage:!0}),m.packageTab.find('[data-value="'+e+'"]').trigger("click",[!0])},closeDiscountCountDown:function(){location.reload()},triggerLogin:function(){var e=t(".site-login").attr("href");location.href=e},quantityMinus:function(e){e.preventDefault();var a=t(e.currentTarget),i=a.siblings("input"),n=i.val();n=t.isNumeric(n)?parseInt(n,10)-1:1,0>=n&&(n=1),this.model.set("quantity",n)},quantityPlus:function(e){e.preventDefault();var a=t(e.currentTarget),i=a.siblings("input"),n=i.data("max"),s=i.val();s=t.isNumeric(s)?parseInt(s,10)+1:1,n&&s>=n?s=n:s>500&&(s=500),this.model.set("quantity",s)},enterQuantity:function(e){e.preventDefault();var a=t(e.currentTarget),i=a.data("max"),n=a.val();n=t.isNumeric(n)?parseInt(n,10):1,0>=n&&(n=1),i&&n>=i?n=i:n>500&&(n=500),a.val(n),this.model.set("quantity",n)},getSkuModel:function(e){var a,i=this,n=(i.model,i.collection),s=t.extend({},n.get(e).toJSON()),o=s.id.split(";");return t.each(o,function(e,t){a=t.split(":"),delete s[a[0]]}),delete s.id,s},handlerPriceOrDiscount:function(){var e,a,i,n=this,s=n.model,o=s.get("discountKeys"),r=s.get("priceCent"),c=s.get("pvs");e=s.get("isPackage")&&s.get("activePackage")?c+"+"+s.get("activePackage"):o&&-1!==t.inArray(c+"+0",o)?c+"+0":c,o&&-1!==t.inArray(e,o)?(a=MZ.modelData.discount.cspuMap[e].priceCent,i=r):(a=r,i=0),s.set({mainPriceCent:a,costPriceCent:i})},updateSummaryInfo:function(){var e=this.model,t=e.get("attributes"),a=e.get("packageName"),i=t;a&&(i+=" "+a),m.summaryName.text(i)},updatePrice:function(e,t){m.price.text((t/100).toFixed(2)),this.setTotalPrice()},setTotalPrice:function(){var e=this,t=e.model,a=t.get("packageTotalPriceCent"),i=t.get("mainPriceCent");t.set("total",a+i)},updateCostPrice:function(){var e=this,t=e.model.get("costPriceCent"),a=e.model.get("mainPriceCent"),i=e.model.get("packageTotalPriceCent"),n=e.model.get("packageTotalProfitsCent");t>0&&t>a?(i&&n&&(t=t+i+n),m.originalPrice.text("¥ "+(t/100).toFixed(2)).show(),m.activity.show(),m.discountTag.text("限时折扣："),m.discountCountDown.show()):(m.originalPrice.empty().hide(),m.activity.hide(),m.discountTag.html('价<span class="s-space"></span><span class="s-space"></span>格：'),m.discountCountDown.hide())},updateTotal:function(e,t){var a=e.get("quantity"),t=t||e.get("total"),i=t/100*a;m.price.text((t/100).toFixed(2)),m.totalPriceShortcut.text("￥"+i.toFixed(2))},updateNames:function(e,t){m.summaryMain.html(t+"&nbsp;&nbsp;￥"+e.get("price"))},updateStock:function(e,t){var a=e.get("buyButton");e.get("isPanicBuying")||(g.isComingSale()?m.btnBuy.text("即将发售").addClass("disabled"):0>=t?m.btnBuy.text(a).addClass("disabled"):m.btnBuy.text("立即购买").removeClass("disabled"))},updateButton:function(e,t){var a=e.get("stock"),i=g.isComingSale();e.get("isPanicBuying")||!i&&0>=a&&m.btnBuy.text(t)},preloadImages:function(e){var a,i=this;e&&e.length&&(a=t.map(e,function(e){return e+"@680x680.jpg"}),t.each(a,function(e,a){if(-1===t.inArray(a,i.imgLoaded)){var n=new Image;n.src=a,n.complete?i.imgLoaded.push(a):n.onload=n.onerror=function(){i.imgLoaded.push(n),n.onload=n.onerror=null}}}))},updateImages:function(e,a){var i=this,n=a[0]+"@680x680.jpg",s="";m.imgBooth.find("img").attr("src",n),t.each(a,function(e){s+='<li><a data-mtype="store_de_tp_'+(e+1)+'" href="#"><img src="'+a[e]+'@120x120.jpg" width="75" height="75"></a></li>'}),m.previewThumb.html(s),m.previewThumb.find("li:first").addClass("current"),i.preloadImages(a)},updatePvs:function(e,t){var a=this,e=a.model,i=e.get("packageStock"),n=e.get("activePackage"),s=t+"+"+n;i[s]&&e.set({buyButton:i[s].buyButton,skuId:i[s].skuId,stock:i[s].stock})},syncSoonSale:function(){var e,t=this,n=this.model,s=n.get("isPanicBuying"),o=MZ.modelData.activeStatus,r=MZ.modelData.shelveTime,c=i.isLogin,l=g.getWaitingTime(),d=m.serverTime.val(),u=Math.ceil((r-d)/1e3),p=[];2===o&&(u>7200?p.push('&nbsp;<em id="J_panicBuyingCountDown">'+l+"</em> "):u>0&&(p.push('距开售还剩 <em id="J_panicBuyingCountDown">'+l+"</em> "),s&&!c&&p.push("请预先登录账号")),m.panicBuyingWrap.html(p.join("，")),e=1===MZ.modelData.type?t.countDownDoBuying:t.countDownDoPanicBuying,7200>u&&t.countDown(d,MZ.modelData.shelveTime,t.syncShelveTime,a.bind(e,t)),1===MZ.modelData.type&&m.btnBuy.text("即将发售").addClass("disabled")),s&&(3===o||c||m.btnBuy.text("请先登录").removeClass("disabled").addClass("notlogin"),1===o&&t.panicBuyingStockStatus())},panicBuyingStockStatus:function(e){var t=this,a=t.model,n=MZ.modelData.activeStatus;if(!("skuId"===e&&"package"===a.get("skuIdChangeTarget")||"packageSkuIds"===e&&!a.get("packageSkuIds"))&&1===n)return i.isLogin?void t.getPanicBuyingStatus().done(function(a){if(3===a.activeStatus)return m.btnBuy.text("活动已结束").addClass("disabled"),m.panicBuyingWrap.empty(),g.closeOrderModal(),void(MZ.modelData.activeStatus=3);switch(a.stockStatus){case 1:m.panicBuyingWrap.empty(),1===a.activeStatus&&m.btnBuy.hasClass("disabled")&&m.btnBuy.text("立即抢购").removeClass("disabled"),"buying"===e&&t.orderToken&&t.buyNow(t.orderToken);break;case 2:m.btnBuy.text("还有机会").addClass("disabled"),m.panicBuyingWrap.html("该商品有用户下单后未付款，还有机会抢到"),g.closeOrderModal();break;case 3:m.btnBuy.text("已售罄").addClass("disabled"),m.panicBuyingWrap.empty(),g.closeOrderModal()}}):void m.btnBuy.text("请先登录").addClass("notlogin")},getPanicBuyingStatus:function(){var e=this,a=e.model,i=a.get("skuId"),n=a.get("activePackage"),s=a.get("packageSkuIds"),o=t.Deferred();return i?t.ajax({url:g.remoteURL.getPanicBuyingStatus,type:"get",data:{skuId:i,packageId:n?n:"",packageSkuIdList:s?s.join(","):""},dataType:"json"}).done(function(e){e.success?o.resolve(e.data):o.reject(e.error)}).fail(function(){o.reject()}):o.reject(),o.promise()},countDownDoBuying:function(){var e=MZ.modelData.shelveTime;MZ.modelData.activeStatus=1,m.btnBuy.text("立即购买").removeClass("disabled"),m.panicBuyingWrap.empty(),m.serverTime.val(e+1)},countDownDoPanicBuying:function(){function e(){t.ajax({url:g.remoteURL.getSaleStatus,type:"get",data:{id:MZ.modelData.itemId},dataType:"json"}).done(function(e){1===e.data.activeStatus&&(m.btnBuy.hasClass("disabled")&&m.btnBuy.text("立即抢购").removeClass("disabled"),MZ.modelData.activeStatus=1,i.panicBuyingStockStatus(),clearInterval(a))})}var a,i=this;e(),m.panicBuyingWrap.empty(),a=setInterval(function(){e()},2e3)},countDown:function(e,t,a,i){var n=Math.ceil((t-e)/1e3),s=setInterval(function(){0>=n?(i&&i(),clearInterval(s)):a&&a(n,s),n--},1e3)},syncQuantityStatus:function(e){var t=m.quantity.data("max");t&&e>=t?m.quantity.next().addClass("disabled"):m.quantity.next().removeClass("disabled"),1===e?m.quantity.prev().addClass("disabled"):m.quantity.prev().removeClass("disabled")},updateQuantity:function(e,t){var a=this;a.syncQuantityStatus(t),m.quantity.val(t),this.updateTotal(e)},setProp:function(e){e.preventDefault();var a=this,i=a.model,n=t(e.currentTarget),s=n.data("value"),o=s.split(":"),r=t.extend({},i.get("propSet"));void 0!==r[o[0]]&&(n.hasClass("disabled")||(n.hasClass("selected")?(r[o[0]]="",i.set({propSet:r,skuIdChangeTarget:"prop"}),n.removeClass("selected")):(r[o[0]]=s,i.set({propSet:r,skuIdChangeTarget:"prop"}),n.addClass("selected").siblings().removeClass("selected")),a.analysis(),a.clearMessage()))},setPackage:function(e,a){e.preventDefault();var i=this,n=i.model,s=n.get("packageMap"),a=n.get("initSelectedPackage"),o=t(e.currentTarget),r=o.data("value"),c=o.attr("title");o.hasClass("disabled")||(o.hasClass("selected")?(n.set({activePackage:"",skuIdChangeTarget:"package",packageName:""}),o.removeClass("selected"),o.find(".vm-text-price").text(s[r].price+"元"),o.find(".vm-text-profits").html("省<em>"+s[r].profits+"</em>元")):(o.addClass("selected").siblings().removeClass("selected"),n.set({activePackage:r,skuIdChangeTarget:"package",packageName:c})),a&&n.set({initSelectedPackage:!1}),t("#J_triangle").hide().css("left",o.position().left+o.width()/2).show(),i.clearMessage())},handlerPackage:function(e,a){var i,n=this,s=e.get("packageMap"),o=[];a&&a.length?(t.each(a,function(e,t){i=s[t],i.id=t,o.push(i)}),m.packageTab.html(n.packageTabCompiled({packages:o})),m.packageContent.hide(),m.packageBody.empty(),m.propertyPackage.is(":hidden")&&m.propertyPackage.slideDown()):(m.propertyPackage.hide(),m.packageTab.empty(),m.packageBody.empty()),e.set("activePackage","",{silent:!0}),e.set({packageSkuIds:null,packageTotalPriceCent:0})},activePackageItem:function(e){var a=this,i=t(e.currentTarget);i.addClass("selected").siblings().removeClass("selected"),a.switchPackageItem(e.currentTarget),a.packageCalculate(),a.updatePackagePrice(),a.updateCostPrice()},switchPackageItem:function(e){var a,i=t(e),n=this,s=n.model,o=s.get("packageItems"),r=(i.data("sku"),i.data("sid")),c=i.data("key");r&&c&&(a=o[r].cells[c],i.parents("li").find(".vm-pic img").attr({src:a.images+"@80x80.jpg",alt:a.names}))},packageCalculate:function(){var e,a=this,i=a.model,n=i.get("packageItems"),s=[],o=[],r={},c=0,l=0;m.packageBody.find(".selected").each(function(){var a=t(this),i=a.data("sku"),r=a.data("sid"),c=a.data("key");s.push(i),r&&c&&(e=n[r].cells[c],e.fullName=n[r].name+"&nbsp;"+e.names,o.push(e))}),t.each(o,function(e,t){r[t.skuId]=t.fullName,c+=t.priceCent,l+=t.originPriceCent-t.priceCent}),a.model.set({packageSkuIds:s,packageSet:r,packageTotalPriceCent:c,packageTotalProfitsCent:l})},updatePackagePrice:function(){var e=this,t=e.model.get("packageTotalPriceCent")/100,a=e.model.get("packageTotalProfitsCent")/100,i=m.packageTab.find(".selected").find(".vm-text-profits");m.packageTab.find(".selected").find(".vm-text-price").text(t+"元"),a>0?i.html("省<em>"+a+"</em>元").show():i.hide()},renderPackageContent:function(e){var a,i=this,n=i.model.get("packageItems"),s=i.model.get("initSelectedPackage"),o=[];e&&t.isArray(e)?(t.each(e,function(e,i){a=t.extend({},n[i]),a.id=i,o.push(a)}),m.packageBody.html(i.packageItemCompiled({items:o})),s?m.packageContent.show():m.packageContent.slideDown()):(m.packageContent.hide(),m.packageBody.empty(),m.packageTab.find(".selected").addClass("single"))},activePackage:function(e,t){var a=this,e=a.model,i=e.get("packageMap"),n=e.get("packageStock"),s=e.get("pvs")+"+"+t;(t||0===t)&&i[t]?(a.model.set({buyButton:n[s].buyButton,skuId:n[s].skuId,stock:n[s].stock}),a.renderPackageContent(i[t].items),a.packageCalculate()):(m.packageContent.hide(),m.packageBody.empty(),a.model.set({packageSkuIds:null,packageTotalPriceCent:0,packageTotalProfitsCent:0})),a.updateCostPrice()},mergeSkuModel:function(e,i){var n,s,o,r=this,c=(r.collection,r.model.get("propItem")),l=r.model.get("packageMap"),d=(r.model.get("packageItems"),[]);t.each(c,function(e,t){d.push(i[t])}),n=d.join(";"),r.collection.get(n)&&(s=r.getSkuModel(n),o=t.extend(!0,{},s),delete s.stock,delete s.skuId,delete s.buyButton,delete s.pvs,r.model.set(s),a.isEmpty(l)?(r.model.set("pvs",o.pvs,{silent:!0}),r.model.set({buyButton:o.buyButton,stock:o.stock,skuId:o.skuId})):""!==r.model.get("activePackage")?r.model.set("pvs",o.pvs):(r.model.set("skuId",""),r.handlerPriceOrDiscount(),r.model.set("pvs",o.pvs,{silent:!0})))},analysis:function(){var e,a,i=this,n=i.model.get("propItem"),s=t.extend({},i.model.get("propSet")),o=i.collection,r={};t.each(s,function(t,a){a&&(e=a.split(":"),r[e[0]]=e[1])}),t.each(n,function(e,n){var s,c=n,l=t.extend({},r),d=i.$el.find('.property-set-sale a[data-value^="'+c+'"]'),u=[];delete l[n],a=o.where(l),t.each(a,function(e,a){var i=a.get(c);-1===t.inArray(i,u)&&u.push(i)}),s=d.removeClass("disabled").filter(function(){var e=t(this).data("value"),a=e.split(":")[1];return-1===t.inArray(a,u)}).addClass("disabled")})},syncShelveTime:function(e){var a=!1,i=Math.floor(e%86400/3600),n=Math.floor(e%3600/60)<10?"0"+Math.floor(e%3600/60):Math.floor(e%3600/60),s=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);7200>=e&&(a=i+"时"+n+"分"+s+"秒"),a&&t("#J_panicBuyingCountDown").text(a)},render:function(){return this},validate:function(){var e=this,i=e.model,n=e.$el.find(".property-set-sale"),s=i.get("propSet"),o=i.get("propItem"),r=i.get("quantity"),c=i.get("packageMap"),l=i.get("activePackage"),d=[],u=!0,p="",g=!1;return g=s&&o.every(function(e){return""!==s[e]}),t.each(o,function(e,t){var a;s[t]||(a=n.eq(e).data("property"),d.push(a))}),a.isEmpty(c)||""!==l||d.push("套餐"),d.length&&(p="请选择："+d.join("、"),u=!1),t.isNumeric(r)||(p="请确认输入了正确的商品数量",u=!1),{isValid:u,message:p}},validateRemote:function(){function e(e){var a,i=[],o=!0;t.each(e,function(e,t){t||(i.push(e),o=!1)}),o?u.resolve():(a=i[0]==n?"商品"+s+" 已售罄":"套餐中的 "+l[i[0]]+" 已售罄",u.reject(a))}var a=this,i=a.model,n=i.get("skuId"),s=i.get("names"),o=i.get("packageMap"),r=i.get("activePackage"),c=i.get("packageSkuIds"),l=i.get("packageSet"),d=[],u=t.Deferred();return d.push(n),r&&c&&c.length&&(d=d.concat(c)),""!==r&&o[r]&&(s=s+" "+o[r].name),t.ajax({url:g.remoteURL.getStock,type:"get",data:{skuId:d.join(",")},dataType:"json"}).done(function(t){t.success?e(t.data):u.reject(t.error)}).fail(function(){}),u.promise()},clearMessage:function(){g.isComingSale()||m.message.text("").removeClass("error")},buyNow:function(e){var a=this,i=a.model.toJSON(),n=i.packageSkuIds?i.packageSkuIds.join(","):"",s=t("<form>"),o=['<input type="hidden" name="sku_id" value="'+i.skuId+'" />','<input type="hidden" name="numbers" value="'+i.quantity+'"/>','<input type="hidden" name="package_id" value="'+i.activePackage+'" />','<input type="hidden" name="package_list" value="'+n+'"/>'];e&&o.push('<input type="hidden" name="token" value="'+e+'"/>'),s.attr({action:g.remoteURL.orderAdd,method:"POST"}).html(o.join("")).appendTo("body").submit()},distributeSubmit:function(e){var a,s=this,o=s.model.get("isPanicBuying"),r=t(e.currentTarget);if(!r.hasClass("disabled")&&!r.hasClass("locked")){if(a=s.validate(),!a.isValid)return void m.message.html(a.message).addClass("error");if(!i.isLogin)return void n.login("store");o?s.panicBuyingSubmit():s.submit(),r.lockButton()}},panicBuyingSubmit:function(){function e(){t.ajax({url:g.remoteURL.getToken,type:"get",data:{itemId:MZ.modelData.itemId},dataType:"jsonp"}).done(function(e){e.success?(a.orderToken=e.data,a.panicBuyingStockStatus("buying"),g.closeOrderModal()):a.executeTokenException(e.errorCode||e.code)})}var a=this;if(a.orderToken)return void a.panicBuyingStockStatus("buying");try{e(),window.modalTimer=setTimeout(function(){g.orderDialog||g.startOrderModal()},1e3),window.tokenTimer=setInterval(function(){g.orderDialog||g.startOrderModal(),e()},2e3),window.stockWhenOrderTimer=setInterval(function(){a.panicBuyingStockStatus("ordering")},3e4)}catch(i){g.closeOrderModal()}},executeTokenException:function(e){var t=this;switch(e){case 401:g.closeOrderModal(),n.login("store");break;case 5002:g.closeOrderModal(),t.panicBuyingStockStatus()}},submit:function(){var e=this;e.validateRemote().done(function(){e.buyNow()}).fail(function(e){"login first"==e?n.login("store"):e&&m.message.html(e).addClass("error")})}}),g={remoteURL:{orderAdd:"http://ordercenter.meizu.com/order/add.html",getStock:"http://detail.meizu.com/api/sku/stock",getSaleStatus:"http://detail.meizu.com/api/item/sale_status",getPanicBuyingStatus:"http://detail.meizu.com/api/sku/sale_status",getToken:"http://pyramid.meizu.com/queue/token"},parseCspuMap:function(e){var a,i=[],e=e||MZ.modelData.cspuMap;return t.each(e,function(e,n){var s=e.split(";");t.each(s,function(e,t){a=t.split(":"),n[a[0]]=a[1]}),n.id=e,n.pvs=e,i.push(n)}),i},startOrderModal:function(){var e=this,a='<div class="bi-dialog" id="J_dialogOrder"><div class="bi-dialog-inner"><div class="bi-dialog-hd"></div><div class="bi-dialog-bd tcenter"><img class="dialog-cont-pic" src="http://store.res.meizu.com/resources/php/store/static/detail/assets/img/lineup.gif"></div><p class="dialog-cont-text">参加活动的人数较多，正在为您排队，请稍候！<br/>无需刷新页面，排队自动进行中……</p><div class="bi-dialog-ft"></div></div><a class="bi-close" id="J_DialogClose" href="javascript:;">╳</a></div>';e.orderDialog=dialog({width:600,height:500,content:a,zIndex:1e5,onshow:function(){t("#J_DialogClose").on("click.dialog",function(){g.closeOrderModal()})},onclose:function(){g.closeOrderModal(),t("#J_DialogClose").off("click.dialog")},backdropOpacity:.4}).showModal()},closeOrderModal:function(){window.modalTimer&&clearTimeout(window.modalTimer),window.tokenTimer&&clearInterval(window.tokenTimer),window.stockWhenOrderTimer&&clearInterval(window.stockWhenOrderTimer),this.orderDialog&&(this.orderDialog.remove(),this.orderDialog=!1)},queryString:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?t[1]:""},getPvs:function(){var e=this.queryString("skuid");return e&&MZ.modelData.skuMap[e]?MZ.modelData.skuMap[e]:MZ.modelData.recommend},isComingSale:function(){return 1===MZ.modelData.type&&2===MZ.modelData.activeStatus?!0:!1},getShowTime:function(){var e,t=MZ.modelData.shelveTime,a=new Date;return a.setTime(t),e=a.getMonth()+1+"月"+a.getDate()+"日 "+(a.getHours()>=10?a.getHours():"0"+a.getHours())+":"+(a.getMinutes()>=10?a.getMinutes():"0"+a.getMinutes())+" 准时开售"},getDiscountTime:function(e){var t=!1;e&&(t=Math.floor(e/86400)+"天"+Math.floor(e%86400/3600)+"时"+Math.floor(e%3600/60)+"分"+Math.floor(e%60)+"秒"),t&&m.discountCountDown.html("( 剩余<em>"+t+"</em> )")},getWaitingTime:function(e){var t,a=this,i=MZ.modelData.shelveTime,n=Number(m.serverTime.val()),e=e||0,s=Math.ceil((i-n)/1e3)-e;return t=0>s?!1:7200>s?Math.floor(s/3600)+"时"+Math.floor(s%3600/60)+"分"+Math.floor(s%60)+"秒":a.getShowTime(i)}},window.livePropertyView=new d({el:"#property",model:new l({pvs:g.getPvs(),packageMap:o.packageMap,packageStock:o.packageStockMap,packageItems:o.packageItems,isPanicBuying:2===o.type,isPackage:!a.isEmpty(o.packageMap),discountKeys:o.discount?a.keys(o.discount.cspuMap):null}),collection:new p(g.parseCspuMap())})});
;/*!/assets/js/site-selector.js*/
define("detail:assets/js/site-selector",function(e){var i=e("common:lib/jquery/jquery-1.11.3"),a=e("common:lib/underscore/underscore-min");e("detail:assets/js/JSON-js/json2"),e("common:lib/jquery.cookie/jquery.cookie");var n={sort:[2911,14848,7450,8452,16860,1,16624,18482,21612,41143,42634,36793,15121,1214,27304,35714,34187,23366,20238,32166,11241,38498,21894,3251,10088,25024,25305,13289,25761,32939,5700],provinceAndCities:{2911:{id:2911,name:"北京",cities:[{id:2912,name:"北京市"}]},14848:{id:14848,name:"天津",cities:[{id:14849,name:"天津市"}]},7450:{id:7450,name:"吉林省",cities:[{id:7451,name:"长春市"},{id:7632,name:"吉林市"},{id:7787,name:"延边朝鲜族自治州"},{id:7901,name:"四平市"},{id:8011,name:"通化市"},{id:8117,name:"白城市"},{id:8222,name:"辽源市"},{id:8272,name:"松原市"},{id:8378,name:"白山市"}]},8452:{id:8452,name:"辽宁省",cities:[{id:8453,name:"大连市"},{id:8627,name:"丹东市"},{id:8724,name:"沈阳市"},{id:8951,name:"抚顺市"},{id:9043,name:"铁岭市"},{id:9156,name:"鞍山市"},{id:9277,name:"本溪市"},{id:9342,name:"锦州市"},{id:9465,name:"营口市"},{id:9544,name:"阜新市"},{id:9648,name:"辽阳市"},{id:9717,name:"朝阳市"},{id:9892,name:"盘锦市"},{id:9954,name:"葫芦岛市"}]},16860:{id:16860,name:"浙江省",cities:[{id:16861,name:"杭州市"},{id:17072,name:"湖州市"},{id:17146,name:"嘉兴市"},{id:17227,name:"衢州市"},{id:17343,name:"丽水市"},{id:17535,name:"金华市"},{id:17697,name:"宁波市"},{id:17861,name:"舟山市"},{id:17909,name:"绍兴市"},{id:18035,name:"台州市"},{id:18179,name:"温州市"}]},1:{id:1,name:"福建省",cities:[{id:2,name:"福州市"},{id:208,name:"宁德市"},{id:347,name:"三明市"},{id:502,name:"南平市"},{id:652,name:"莆田市"},{id:712,name:"泉州市"},{id:888,name:"厦门市"},{id:933,name:"漳州市"},{id:1073,name:"龙岩市"}]},16624:{id:16624,name:"上海",cities:[{id:16625,name:"上海市"}]},18482:{id:18482,name:"广东省",cities:[{id:18483,name:"汕尾市"},{id:18547,name:"揭阳市"},{id:18641,name:"汕头市"},{id:18718,name:"潮州市"},{id:18773,name:"东莞市"},{id:18807,name:"佛山市"},{id:18846,name:"肇庆市"},{id:18964,name:"云浮市"},{id:19033,name:"广州市"},{id:19209,name:"韶关市"},{id:19327,name:"清远市"},{id:19422,name:"惠州市"},{id:19499,name:"梅州市"},{id:19622,name:"河源市"},{id:19729,name:"深圳市"},{id:19796,name:"阳江市"},{id:19848,name:"茂名市"},{id:19964,name:"江门市"},{id:20052,name:"湛江市"},{id:20184,name:"珠海市"},{id:20212,name:"中山市"}]},21612:{id:21612,name:"海南省",cities:[{id:21613,name:"海口市"},{id:21661,name:"琼海市"},{id:21675,name:"儋州市"},{id:21705,name:"文昌市"},{id:21724,name:"定安县"},{id:21736,name:"屯昌县"},{id:21746,name:"澄迈县"},{id:21759,name:"临高县"},{id:21771,name:"白沙黎族自治县"},{id:21784,name:"昌江黎族自治县"},{id:21794,name:"陵水黎族自治县"},{id:21807,name:"保亭黎族苗族自治县"},{id:21818,name:"琼中黎族苗族自治县"},{id:21830,name:"三亚市"},{id:21840,name:"五指山市"},{id:21849,name:"万宁市"},{id:21864,name:"东方市"},{id:21876,name:"乐东黎族自治县"},{id:21889,name:"三沙市"}]},41143:{id:41143,name:"湖北省",cities:[{id:41144,name:"武汉市"},{id:41336,name:"襄阳市"},{id:41457,name:"鄂州市"},{id:41486,name:"孝感市"},{id:41620,name:"黄冈市"},{id:41774,name:"黄石市"},{id:41835,name:"咸宁市"},{id:41919,name:"荆州市"},{id:42055,name:"宜昌市"},{id:42180,name:"恩施土家族苗族自治州"},{id:42280,name:"十堰市"},{id:42420,name:"神农架"},{id:42430,name:"随州市"},{id:42481,name:"荆门市"},{id:42555,name:"仙桃市"},{id:42579,name:"潜江市"},{id:42604,name:"天门市"}]},42634:{id:42634,name:"湖南省",cities:[{id:42635,name:"岳阳市"},{id:42835,name:"长沙市"},{id:43035,name:"湘潭市"},{id:43126,name:"株洲市"},{id:43271,name:"衡阳市"},{id:43509,name:"郴州市"},{id:43728,name:"常德市"},{id:43978,name:"益阳市"},{id:44087,name:"娄底市"},{id:44190,name:"邵阳市"},{id:44427,name:"湘西土家族苗族自治州"},{id:44603,name:"张家界市"},{id:44713,name:"怀化市"},{id:45025,name:"永州市"}]},36793:{id:36793,name:"安徽省",cities:[{id:36794,name:"滁州市"},{id:36921,name:"合肥市"},{id:37075,name:"蚌埠市"},{id:37163,name:"芜湖市"},{id:37247,name:"淮南市"},{id:37321,name:"马鞍山市"},{id:37380,name:"安庆市"},{id:37567,name:"宿州市"},{id:37682,name:"阜阳市"},{id:37864,name:"亳州市"},{id:37960,name:"黄山市"},{id:38075,name:"淮北市"},{id:38116,name:"铜陵市"},{id:38150,name:"宣城市"},{id:38256,name:"六安市"},{id:38436,name:"池州市"}]},15121:{id:15121,name:"江苏省",cities:[{id:15122,name:"南京市"},{id:15238,name:"镇江市"},{id:15303,name:"扬州市"},{id:15406,name:"南通市"},{id:15534,name:"泰州市"},{id:15644,name:"盐城市"},{id:15794,name:"徐州市"},{id:15973,name:"淮安市"},{id:16129,name:"连云港市"},{id:16230,name:"宿迁市"},{id:16352,name:"苏州市"},{id:16469,name:"无锡市"},{id:16558,name:"常州市"}]},1214:{id:1214,name:"江西省",cities:[{id:1215,name:"鹰潭市"},{id:1261,name:"新余市"},{id:1295,name:"南昌市"},{id:1428,name:"九江市"},{id:1642,name:"上饶市"},{id:1862,name:"抚州市"},{id:2039,name:"宜春市"},{id:2244,name:"吉安市"},{id:2482,name:"赣州市"},{id:2792,name:"景德镇市"},{id:2850,name:"萍乡市"}]},27304:{id:27304,name:"四川省",cities:[{id:27305,name:"成都市"},{id:27640,name:"眉山市"},{id:27778,name:"资阳市"},{id:27959,name:"攀枝花市"},{id:28025,name:"自贡市"},{id:28140,name:"绵阳市"},{id:28443,name:"南充市"},{id:28870,name:"达州市"},{id:29192,name:"遂宁市"},{id:29316,name:"广安市"},{id:29504,name:"巴中市"},{id:29702,name:"泸州市"},{id:29852,name:"宜宾市"},{id:30049,name:"内江市"},{id:30176,name:"乐山市"},{id:30407,name:"凉山彝族自治州"},{id:31038,name:"雅安市"},{id:31200,name:"甘孜藏族自治州"},{id:31543,name:"阿坝藏族羌族自治州"},{id:31780,name:"德阳市"},{id:31914,name:"广元市"}]},35714:{id:35714,name:"重庆",cities:[{id:35715,name:"重庆市"}]},34187:{id:34187,name:"云南省",cities:[{id:34188,name:"怒江傈僳族自治州"},{id:34222,name:"丽江市"},{id:34291,name:"西双版纳傣族自治州"},{id:34330,name:"德宏傣族景颇族自治州"},{id:34388,name:"昭通市"},{id:34543,name:"昆明市"},{id:34696,name:"大理白族自治州"},{id:34821,name:"红河哈尼族彝族自治州"},{id:34968,name:"曲靖市"},{id:35093,name:"保山市"},{id:35171,name:"文山壮族苗族自治州"},{id:35282,name:"玉溪市"},{id:35367,name:"楚雄彝族自治州"},{id:35481,name:"普洱市"},{id:35595,name:"临沧市"},{id:35681,name:"迪庆藏族自治州"}]},23366:{id:23366,name:"贵州省",cities:[{id:23367,name:"遵义市"},{id:23625,name:"安顺市"},{id:23719,name:"贵阳市"},{id:23856,name:"黔南布依族苗族自治州"},{id:24109,name:"黔东南苗族侗族自治州"},{id:24335,name:"铜仁市"},{id:24515,name:"毕节市"},{id:24776,name:"六盘水市"},{id:24879,name:"黔西南布依族苗族自治州"}]},20238:{id:20238,name:"广西壮族自治区",cities:[{id:20239,name:"防城港市"},{id:20271,name:"南宁市"},{id:20410,name:"崇左市"},{id:20494,name:"柳州市"},{id:20621,name:"来宾市"},{id:20698,name:"桂林市"},{id:20862,name:"梧州市"},{id:20936,name:"贺州市"},{id:21003,name:"贵港市"},{id:21083,name:"玉林市"},{id:21200,name:"百色市"},{id:21348,name:"钦州市"},{id:21426,name:"河池市"},{id:21577,name:"北海市"}]},32166:{id:32166,name:"西藏自治区",cities:[{id:32167,name:"拉萨市"},{id:32241,name:"日喀则地区"},{id:32463,name:"山南地区"},{id:32558,name:"林芝地区"},{id:32620,name:"昌都地区"},{id:32770,name:"那曲地区"},{id:32895,name:"阿里地区"}]},11241:{id:11241,name:"山东省",cities:[{id:11242,name:"菏泽市"},{id:11420,name:"济南市"},{id:11560,name:"淄博市"},{id:11679,name:"德州市"},{id:11825,name:"济宁市"},{id:11994,name:"泰安市"},{id:12087,name:"滨州市"},{id:12186,name:"东营市"},{id:12234,name:"莱芜市"},{id:12257,name:"聊城市"},{id:12401,name:"青岛市"},{id:12584,name:"临沂市"},{id:12777,name:"枣庄市"},{id:12848,name:"日照市"},{id:12909,name:"烟台市"},{id:13078,name:"潍坊市"},{id:13210,name:"威海市"}]},38498:{id:38498,name:"河南省",cities:[{id:38499,name:"商丘市"},{id:38699,name:"郑州市"},{id:38899,name:"安阳市"},{id:39045,name:"新乡市"},{id:39213,name:"许昌市"},{id:39321,name:"平顶山市"},{id:39476,name:"信阳市"},{id:39698,name:"南阳市"},{id:39950,name:"开封市"},{id:40085,name:"洛阳市"},{id:40292,name:"焦作市"},{id:40407,name:"济源市"},{id:40425,name:"鹤壁市"},{id:40474,name:"濮阳市"},{id:40570,name:"周口市"},{id:40787,name:"漯河市"},{id:40848,name:"驻马店市"},{id:41056,name:"三门峡市"}]},21894:{id:21894,name:"甘肃省",cities:[{id:21895,name:"临夏回族自治州"},{id:22034,name:"兰州市"},{id:22160,name:"定西市"},{id:22289,name:"平凉市"},{id:22412,name:"庆阳市"},{id:22541,name:"金昌市"},{id:22562,name:"武威市"},{id:22668,name:"张掖市"},{id:22741,name:"嘉峪关市"},{id:22753,name:"酒泉市"},{id:22839,name:"天水市"},{id:22970,name:"陇南市"},{id:23174,name:"甘南藏族自治州"},{id:23282,name:"白银市"}]},3251:{id:3251,name:"河北省",cities:[{id:3252,name:"张家口市"},{id:3507,name:"承德市"},{id:3734,name:"邯郸市"},{id:3996,name:"石家庄市"},{id:4296,name:"保定市"},{id:4663,name:"衡水市"},{id:4796,name:"邢台市"},{id:5012,name:"唐山市"},{id:5268,name:"廊坊市"},{id:5387,name:"沧州市"},{id:5595,name:"秦皇岛市"}]},10088:{id:10088,name:"内蒙古自治区",cities:[{id:10089,name:"赤峰市"},{id:10260,name:"呼伦贝尔市"},{id:10391,name:"兴安盟"},{id:10455,name:"呼和浩特市"},{id:10549,name:"包头市"},{id:10650,name:"乌海市"},{id:10676,name:"乌兰察布市"},{id:10793,name:"鄂尔多斯市"},{id:10881,name:"巴彦淖尔市"},{id:10973,name:"锡林郭勒盟"},{id:11071,name:"阿拉善盟"},{id:11110,name:"通辽市"}]},25024:{id:25024,name:"宁夏回族自治区",cities:[{id:25025,name:"银川市"},{id:25089,name:"石嘴山市"},{id:25130,name:"吴忠市"},{id:25186,name:"固原市"},{id:25258,name:"中卫市"}]},25305:{id:25305,name:"青海省",cities:[{id:25306,name:"海北藏族自治州"},{id:25342,name:"西宁市"},{id:25422,name:"海东市"},{id:25523,name:"黄南藏族自治州"},{id:25560,name:"海南藏族自治州"},{id:25603,name:"果洛藏族自治州"},{id:25654,name:"玉树藏族自治州"},{id:25707,name:"海西蒙古族藏族自治州"}]},13289:{id:13289,name:"山西省",cities:[{id:13290,name:"朔州市"},{id:13374,name:"忻州市"},{id:13581,name:"太原市"},{id:13697,name:"大同市"},{id:13852,name:"阳泉市"},{id:13903,name:"晋中市"},{id:14056,name:"长治市"},{id:14223,name:"晋城市"},{id:14317,name:"临汾市"},{id:14507,name:"吕梁市"},{id:14683,name:"运城市"}]},25761:{id:25761,name:"陕西省",cities:[{id:25762,name:"西安市"},{id:25952,name:"咸阳市"},{id:26124,name:"延安市"},{id:26264,name:"榆林市"},{id:26462,name:"渭南市"},{id:26618,name:"商洛市"},{id:26752,name:"安康市"},{id:26924,name:"汉中市"},{id:27125,name:"宝鸡市"},{id:27259,name:"铜川市"}]},32939:{id:32939,name:"新疆维吾尔自治区",cities:[{id:32940,name:"塔城地区"},{id:33052,name:"哈密地区"},{id:33108,name:"和田地区"},{id:33216,name:"阿勒泰地区"},{id:33284,name:"克孜勒苏柯尔克孜自治州"},{id:33328,name:"博尔塔拉蒙古自治州"},{id:33357,name:"克拉玛依市"},{id:33380,name:"乌鲁木齐市"},{id:33482,name:"石河子市"},{id:33492,name:"昌吉回族自治州"},{id:33580,name:"五家渠市"},{id:33588,name:"吐鲁番地区"},{id:33625,name:"巴音郭楞蒙古自治州"},{id:33726,name:"阿克苏地区"},{id:33843,name:"阿拉尔市"},{id:33861,name:"喀什地区"},{id:34045,name:"图木舒克市"},{id:34056,name:"伊犁哈萨克自治州"}]},5700:{id:5700,name:"黑龙江省",cities:[{id:5701,name:"哈尔滨市"},{id:6019,name:"齐齐哈尔市"},{id:6224,name:"牡丹江市"},{id:6325,name:"佳木斯市"},{id:6445,name:"绥化市"},{id:6659,name:"黑河市"},{id:6759,name:"大兴安岭地区"},{id:6811,name:"伊春市"},{id:7023,name:"大庆市"},{id:7124,name:"七台河市"},{id:7174,name:"鸡西市"},{id:7302,name:"鹤岗市"},{id:7368,name:"双鸭山市"}]}}},d={delivery:i("#J_delivery"),site:i("#site-selector")},m={props:{cities:n.provinceAndCities,provinceSet:null,countyAndTown:null,origin:{province:"北京",provinceId:2911,city:"北京市",cityId:2912},userSite:null,activeSite:{}},remoteUrl:{getSiteByIp:"http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js",getDefaultSite:"http://store.meizu.com/vip/address/default_new_address",queryChildren:"http://area.meizu.com/area/child/batch_query",fastArrival:"http://detail.meizu.com/api/sku/check_fast_arrival"},buildBaseHTML:function(){var e='<div data-widget="tabs"class="m JD-stock"id="JD-stock"><div class="mt"><ul class="tab"><li data-index="0"data-widget="tab-item"class="curr"><a href="#none"><em></em><i></i></a></li><li data-index="1"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li><li data-index="2"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li><li data-index="3"data-widget="tab-item"style="display:none;"><a href="#none"><em></em><i></i></a></li></ul><div class="stock-line"></div></div><div class="mc"data-area="0"data-widget="tab-content"id="site-province-item"></div><div class="mc"data-area="1"data-widget="tab-content"id="site-city-item"></div><div class="mc"data-area="2"data-widget="tab-content"id="site-area-item"></div><div class="mc"data-area="3"data-widget="tab-content"id="site-town-item"></div></div>',i='<div class="JD-stock-con">'+e+'</div><span class="vm-close"></span>';d.content=d.site.find(".content"),d.content.html(i),d.show=d.site.find(".text"),d.tabs=d.site.find(".tab li"),d.panels=d.site.find(".mc")},provinceShort:function(e){var i;switch(e.id){case 32939:i="新疆";break;case 25024:i="宁夏";break;case 10088:i="内蒙古";break;case 20238:i="广西";break;case 32166:i="西藏";break;default:i=e.name.replace("省","")}return{id:e.id,name:i}},init:function(){var e,m=this,t=m.props.cities,s=[];i.each(n.sort,function(i,a){e=m.provinceShort(t[a]),s.push({id:e.id,name:e.name})}),m.props.provinceSet=s,m.buildBaseHTML(),m.getDefaultSite().done(function(e){m.render(e),m.renderShowSite()}),m.bindEvent(),d.delivery.show(),window.livePropertyView.listenTo(window.livePropertyView.model,"change:skuId",m.queryFastArrival.bind(m,"skuId")),a.isEmpty(window.MZ.modelData.packageMap)||window.livePropertyView.listenTo(window.livePropertyView.model,"change:packageSkuIds",m.queryFastArrival.bind(m,"packageSkuIds"))},render:function(e){var i=this,a=e.provinceId,n=e.cityId,m=e.areaId,t=e.townId,s=[];if(d.panels.hide(),i.getAreaList(i.props.provinceSet,i.getIdNameByLevel(0)),i.props.cities[a]&&e.provinceId!==e.cityId&&i.getAreaList(i.props.cities[a].cities,i.getIdNameByLevel(1)),m&&t)d.panels.eq(3).show(),d.tabs.show().eq(3).addClass("curr").siblings().removeClass("curr"),s.push(n,m),i.queryFastArrival();else{if("origin"===e.type)return d.panels.eq(0).show(),void d.tabs.hide().first().show();d.panels.eq(2).show(),d.tabs.hide().filter(":lt(3)").show().last().addClass("curr").siblings().removeClass("curr"),s.push(n)}i.ajax(i.remoteUrl.queryChildren,{parentIds:s.join(",")},"get","jsonp").done(function(e){e[n]&&i.getAreaList(e[n],i.getIdNameByLevel(2)),e[m]&&i.getAreaList(e[m],i.getIdNameByLevel(3))})},renderShowSite:function(){var e=this,i=[],a=(e.props.activeSite,e.props.userSite,e.props.activeSite[0]&&e.props.activeSite[0].name||e.props.userSite.province),n=e.props.activeSite[1]&&e.props.activeSite[1].name||e.props.userSite.city,m=e.props.activeSite[2]&&e.props.activeSite[2].name||e.props.userSite.area,t=e.props.activeSite[3]&&e.props.activeSite[3].name||e.props.userSite.town;n&&i.push(n),m?i.push(m):i.unshift(a),i.push(t?t:"【请选择】"),d.show.text(i.join(" "))},getIdNameByLevel:function(e){var i="";switch(e){case 0:i="site-province-item";break;case 1:i="site-city-item";break;case 2:i="site-area-item";break;case 3:i="site-town-item"}return i},improveIpInfo:function(e){var i,a,n=this;return i=n.matchSiteByUnicode(n.props.provinceSet,e.province),a=n.matchSiteByUnicode(n.props.cities[i].cities,e.city),i&&a?(e.provinceId=i,e.cityId=a,e):n.props.origin},matchSiteByUnicode:function(e,a){var a=a.toString(),n=!1;return i.each(e,function(e,i){return a===i.name.toString()||a.match(i.name.toString())||i.name.toString().match(a)?(n=i.id,!1):void 0}),n},getDefaultSite:function(){var e,a=this,n=i.Deferred();return a.ajax(a.remoteUrl.getDefaultSite,null,"get","jsonp").done(function(e){a.props.userSite=e,n.resolve(e)}).fail(function(){i.getScript(a.remoteUrl.getSiteByIp).done(function(i){window.remote_ip_info?(i=a.improveIpInfo(window.remote_ip_info),a.props.userSite=i,n.resolve(i)):(a.props.userSite=a.props.origin,n.resolve(a.props.userSite)),clearTimeout(e)}),e=setTimeout(function(){a.props.userSite=a.props.origin,n.resolve(a.props.userSite)},750)}),n.promise()},bindEvent:function(){var e,a=this;d.show.mouseover(function(){e=setTimeout(function(){d.site.addClass("hover")},200)}),d.site.mouseleave(function(){var a=i(this);a.hasClass("clicked")||a.removeClass("hover"),clearTimeout(e)}),d.site.on("click",".tab li",function(e){var a=i(this),n=a.index();a.addClass("curr").siblings().removeClass("curr"),d.panels.hide().eq(n).show(),e.preventDefault()}).on("click",".area-list a",function(e){var n=i(this),m=n.attr("data-value"),t=n.text(),s=n.parents(".mc").attr("data-area");d.tabs.eq(s).find("a").attr("title",t).find("em").html(t.length>6?t.substring(0,6)+"...":t),a.activeChildSite(s,m,t),e.preventDefault()}).on("click",".vm-close",function(){d.site.removeClass("hover clicked")})},activeChildSite:function(e,i,a){var n=this;n.props.activeSite[e]={id:i,name:a},3>e?(++e,n.ajax(n.remoteUrl.queryChildren,{parentIds:i},"get","jsonp").done(function(a){n.getAreaList(a[i],n.getIdNameByLevel(e),!0),d.panels.hide().eq(e).show()}),d.site.addClass("clicked"),d.tabs.eq(e).show().addClass("curr").find("em").text("请选择"),d.tabs.eq(e).nextAll().hide().end().siblings().removeClass("curr")):(d.site.removeClass("hover clicked"),n.renderShowSite(),n.queryFastArrival())},getAreaList:function(e,a,n){var d=this,m=['<ul class="area-list">'],t=[],s=[],r=i("#"+a),o=r.data("area"),c="";if(e&&e.length){r.empty();for(var l=0,p=e.length;p>l;l++)e[l].name=e[l].name.replace(" ",""),e[l].name.length>12?s.push("<li class='longer-area'><a href='#none' data-value='"+e[l].id+"'>"+e[l].name+"</a></li>"):e[l].name.length>5?t.push("<li class='long-area'><a href='#none' data-value='"+e[l].id+"'>"+e[l].name+"</a></li>"):0===e[l].id?c="<li><a href='#none' data-value='"+e[l].id+"'>"+e[l].name+"</a></li>":m.push("<li><a href='#none' data-value='"+e[l].id+"'>"+e[l].name+"</a></li>");m.push(t.join("")),m.push(s.join("")),m.push(c),m.push("</ul>"),r.html(m.join("")),n||d.renderShowTab(o)}},renderShowTab:function(e){var i=this.props.userSite,a=["province","city","area","town"],n=i[a[e]]||"请选择";d.tabs.eq(e).find("a").attr("title",n).find("em").html(n.length>6?n.substring(0,6)+"...":n)},queryFastArrival:function(e,a){var n=this,d=n.props.activeSite[0]&&n.props.activeSite[0].id||n.props.userSite.provinceId,m=n.props.activeSite[1]&&n.props.activeSite[1].id||n.props.userSite.cityId,t=n.props.activeSite[2]&&n.props.activeSite[2].id||n.props.userSite.areaId,s=n.props.activeSite[3]&&n.props.activeSite[3].id||n.props.userSite.townId,r=livePropertyView.model.get("quantity"),o=livePropertyView.model.get("skuId"),c=livePropertyView.model.get("packageSkuIds"),l=[];"skuId"===e&&"package"===a.get("skuIdChangeTarget")||"packageSkuIds"===e&&!c||s&&o&&(l.push({id:livePropertyView.model.get("skuId"),num:r}),c&&i.each(c,function(e,i){l.push({id:i,num:r})}),i.ajax({url:n.remoteUrl.fastArrival,type:"post",data:JSON.stringify({provinceId:d,cityId:m,areaId:t,townId:s,skus:l}),contentType:"application/json",dataType:"json"}).done(function(e){var a,n=e.data,d="",m="";e.success&&(1===n.fastArrivalStatus?(m="今天",d+='<a class="vm-today" href="http://store.meizu.com/marrive/summary.html" target="_blank"><i class="icon icon-shandian"></i>当日达</a>'):2===n.fastArrivalStatus&&(a=new Date(n.arrivalDate),m="明天（"+(a.getMonth()+1)+"月"+a.getDate()+"日）",d+='<a class="vm-today" href="http://store.meizu.com/marrive/summary.html" target="_blank"><i class="icon icon-shandian"></i>次日达</a>'),i("#J_siteStatus").html(d),n.payTime&&n.arrivalDate&&i("#J_siteStatus").append(n.payTime+" 前下单并支付，预计"+m+"送达"))}).fail(function(){alert("系统繁忙，请稍后再试！")}))},getUserId:function(){var e,a=i.cookie("MEIZUSTORESESSIONVAL");return a&&(e=JSON.parse(decodeURIComponent(a)).uid),e},ajax:function(e,a,n,d){var m=i.Deferred();return i.ajax({url:e,type:n?n:"get",data:a?a:null,dataType:d?d:"json",timeout:4e3,cache:!1}).done(function(e){e.success||200===e.code&&e.data?m.resolve(e.data):m.reject(e.message)}).fail(function(){m.reject("请求失败")}),m.promise()}};MZ.modelData.supportFastArrival&&m.init(),MZ.site=m});
;/*!/assets/js/main.js*/
var $=require("common:lib/jquery/jquery-1.11.3");require("detail:assets/js/property"),require("detail:assets/js/site-selector"),require("detail:assets/js/coupon"),require("detail:assets/js/jquery.vtab/jquery.vtab"),require("detail:assets/js/jquery.lazyload/jquery.lazyload"),require("detail:assets/js/jquery.scrollfix/jquery.scrollfix");var GoTop=require("detail:assets/js/jquery.gotop/jquery.gotop"),Favorite=require("detail:assets/js/favorite");$(function(){var e={imgBooth:$("#J_imgBooth")};$("#detail").vtab({navSelector:".detail-tab ul",contSelector:".detail-content",afterActive:function(e,t,i){var r=e.parents(".detail-tab");(r.hasClass("fixed")||"gotop"===i)&&$("html,body").animate({scrollTop:$("#detail").offset().top-80},150)}}),$("#detailFast li").on("click",function(e){var t=$(this),i=t.index();$("#detail .detail-tab li").eq(i).trigger("click",["gotop"]),t.addClass("current").siblings().removeClass("current"),e.preventDefault()}),$("#J_btnBuyShortcut").on("click",function(){$("#J_btnBuy").trigger("click")}),$("#J_previewThumb").on("click","li",function(t){t.preventDefault();var i=$(this),r=i.find("img").attr("src");previewUrl=r.replace("@120x120","@680x680"),i.hasClass("current")||(i.addClass("current").siblings().removeClass("current"),e.imgBooth.find("img").attr("src",previewUrl).hide().fadeIn())}),$("#introduce .lazy").lazyload({threshold:300}),$("#detailFast").scrollfix({min:".property-sell",max:".site-footer"}),$("#detailFast").scrollfix({min:".property-buy-quantity",fixClass:"float-button"}),$("#detailFast").scrollfix({min:"#detail",max:".site-footer",fixClass:"float-nav",onEnter:function(){$("#detailTabFixed").find("ul").hide()},onLeave:function(){$("#detailTabFixed").find("ul").show()}}),$("#J_btnBuyShortcut").on("click",function(){$("html,body").animate({scrollTop:$("#property").offset().top},200)}),new GoTop({speed:600,smartHeight:500}),Favorite()});